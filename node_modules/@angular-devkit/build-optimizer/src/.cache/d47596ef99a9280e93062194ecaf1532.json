{"remainingRequest":"D:\\Code MWSC\\2020-MWSC-Github\\webapps\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js??ref--3-1!D:\\Code MWSC\\2020-MWSC-Github\\webapps\\node_modules\\calendar-utils\\dist\\calendar-utils.js","dependencies":[{"path":"D:\\Code MWSC\\2020-MWSC-Github\\webapps\\node_modules\\calendar-utils\\dist\\calendar-utils.js","mtime":499162500000},{"path":"D:\\Code MWSC\\2020-MWSC-Github\\webapps\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1614055079483},{"path":"D:\\Code MWSC\\2020-MWSC-Github\\webapps\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js","mtime":1519266497000}],"contextDependencies":[],"result":["import addDays from 'date-fns/add_days';\nimport addHours from 'date-fns/add_hours';\nimport addMinutes from 'date-fns/add_minutes';\nimport addSeconds from 'date-fns/add_seconds';\nimport differenceInDays from 'date-fns/difference_in_days';\nimport differenceInMinutes from 'date-fns/difference_in_minutes';\nimport differenceInSeconds from 'date-fns/difference_in_seconds';\nimport endOfDay from 'date-fns/end_of_day';\nimport endOfMonth from 'date-fns/end_of_month';\nimport endOfWeek from 'date-fns/end_of_week';\nimport getDay from 'date-fns/get_day';\nimport isDate from 'date-fns/is_date';\nimport isSameDay from 'date-fns/is_same_day';\nimport isSameMonth from 'date-fns/is_same_month';\nimport isSameSecond from 'date-fns/is_same_second';\nimport max from 'date-fns/max';\nimport setHours from 'date-fns/set_hours';\nimport setMinutes from 'date-fns/set_minutes';\nimport startOfDay from 'date-fns/start_of_day';\nimport startOfMinute from 'date-fns/start_of_minute';\nimport startOfMonth from 'date-fns/start_of_month';\nimport startOfWeek from 'date-fns/start_of_week';\nexport var DAYS_OF_WEEK = /*@__PURE__*/ (function (DAYS_OF_WEEK) {\n    DAYS_OF_WEEK[DAYS_OF_WEEK[\"SUNDAY\"] = 0] = \"SUNDAY\";\n    DAYS_OF_WEEK[DAYS_OF_WEEK[\"MONDAY\"] = 1] = \"MONDAY\";\n    DAYS_OF_WEEK[DAYS_OF_WEEK[\"TUESDAY\"] = 2] = \"TUESDAY\";\n    DAYS_OF_WEEK[DAYS_OF_WEEK[\"WEDNESDAY\"] = 3] = \"WEDNESDAY\";\n    DAYS_OF_WEEK[DAYS_OF_WEEK[\"THURSDAY\"] = 4] = \"THURSDAY\";\n    DAYS_OF_WEEK[DAYS_OF_WEEK[\"FRIDAY\"] = 5] = \"FRIDAY\";\n    DAYS_OF_WEEK[DAYS_OF_WEEK[\"SATURDAY\"] = 6] = \"SATURDAY\";\n    return DAYS_OF_WEEK;\n})({});\nvar DEFAULT_WEEKEND_DAYS = [\n    DAYS_OF_WEEK.SUNDAY,\n    DAYS_OF_WEEK.SATURDAY\n];\nvar DAYS_IN_WEEK = 7;\nvar HOURS_IN_DAY = 24;\nvar MINUTES_IN_HOUR = 60;\nexport var SECONDS_IN_DAY = 60 * 60 * 24;\nexport var SECONDS_IN_WEEK = SECONDS_IN_DAY * DAYS_IN_WEEK;\nfunction getExcludedSeconds(_a) {\n    var startDate = _a.startDate, seconds = _a.seconds, excluded = _a.excluded, _b = _a.precision, precision = _b === void 0 ? 'days' : _b;\n    if (excluded.length < 1) {\n        return 0;\n    }\n    var endDate = addSeconds(startDate, seconds - 1);\n    var dayStart = getDay(startDate);\n    var dayEnd = getDay(addSeconds(endDate, 0));\n    var result = 0; // Calculated in seconds\n    var current = startDate;\n    var _loop_1 = function () {\n        var day = getDay(current);\n        if (excluded.some(function (excludedDay) { return excludedDay === day; })) {\n            result += calculateExcludedSeconds({\n                dayStart: dayStart,\n                dayEnd: dayEnd,\n                day: day,\n                precision: precision,\n                startDate: startDate,\n                endDate: endDate\n            });\n        }\n        current = addDays(current, 1);\n    };\n    while (current < endDate) {\n        _loop_1();\n    }\n    return result;\n}\nfunction calculateExcludedSeconds(_a) {\n    var precision = _a.precision, day = _a.day, dayStart = _a.dayStart, dayEnd = _a.dayEnd, startDate = _a.startDate, endDate = _a.endDate;\n    if (precision === 'minutes') {\n        if (day === dayStart) {\n            return differenceInSeconds(endOfDay(startDate), startDate) + 1;\n        }\n        else if (day === dayEnd) {\n            return differenceInSeconds(endDate, startOfDay(endDate)) + 1;\n        }\n    }\n    return SECONDS_IN_DAY;\n}\nfunction getWeekViewEventSpan(_a) {\n    var event = _a.event, offset = _a.offset, startOfWeekDate = _a.startOfWeekDate, excluded = _a.excluded, _b = _a.precision, precision = _b === void 0 ? 'days' : _b;\n    var span = SECONDS_IN_DAY;\n    var begin = max(event.start, startOfWeekDate);\n    if (event.end) {\n        switch (precision) {\n            case 'minutes':\n                span = differenceInSeconds(event.end, begin);\n                break;\n            default:\n                span =\n                    differenceInDays(addDays(endOfDay(event.end), 1), begin) *\n                        SECONDS_IN_DAY;\n                break;\n        }\n    }\n    var offsetSeconds = offset * SECONDS_IN_DAY;\n    var totalLength = offsetSeconds + span;\n    // the best way to detect if an event is outside the week-view\n    // is to check if the total span beginning (from startOfWeekDay or event start) exceeds 7days\n    if (totalLength > SECONDS_IN_WEEK) {\n        span = SECONDS_IN_WEEK - offsetSeconds;\n    }\n    span -= getExcludedSeconds({\n        startDate: begin,\n        seconds: span,\n        excluded: excluded,\n        precision: precision\n    });\n    return span / SECONDS_IN_DAY;\n}\nexport function getWeekViewEventOffset(_a) {\n    var event = _a.event, startOfWeekDate = _a.startOfWeek, _b = _a.excluded, excluded = _b === void 0 ? [] : _b, _c = _a.precision, precision = _c === void 0 ? 'days' : _c;\n    if (event.start < startOfWeekDate) {\n        return 0;\n    }\n    var offset = 0;\n    switch (precision) {\n        case 'days':\n            offset =\n                differenceInDays(startOfDay(event.start), startOfWeekDate) *\n                    SECONDS_IN_DAY;\n            break;\n        case 'minutes':\n            offset = differenceInSeconds(event.start, startOfWeekDate);\n            break;\n    }\n    offset -= getExcludedSeconds({\n        startDate: startOfWeekDate,\n        seconds: offset,\n        excluded: excluded,\n        precision: precision\n    });\n    return offset / SECONDS_IN_DAY;\n}\nfunction isEventIsPeriod(_a) {\n    var event = _a.event, periodStart = _a.periodStart, periodEnd = _a.periodEnd;\n    var eventStart = event.start;\n    var eventEnd = event.end || event.start;\n    if (eventStart > periodStart && eventStart < periodEnd) {\n        return true;\n    }\n    if (eventEnd > periodStart && eventEnd < periodEnd) {\n        return true;\n    }\n    if (eventStart < periodStart && eventEnd > periodEnd) {\n        return true;\n    }\n    if (isSameSecond(eventStart, periodStart) ||\n        isSameSecond(eventStart, periodEnd)) {\n        return true;\n    }\n    if (isSameSecond(eventEnd, periodStart) ||\n        isSameSecond(eventEnd, periodEnd)) {\n        return true;\n    }\n    return false;\n}\nexport function getEventsInPeriod(_a) {\n    var events = _a.events, periodStart = _a.periodStart, periodEnd = _a.periodEnd;\n    return events.filter(function (event) {\n        return isEventIsPeriod({ event: event, periodStart: periodStart, periodEnd: periodEnd });\n    });\n}\nfunction getWeekDay(_a) {\n    var date = _a.date, _b = _a.weekendDays, weekendDays = _b === void 0 ? DEFAULT_WEEKEND_DAYS : _b;\n    var today = startOfDay(new Date());\n    return {\n        date: date,\n        isPast: date < today,\n        isToday: isSameDay(date, today),\n        isFuture: date > today,\n        isWeekend: weekendDays.indexOf(getDay(date)) > -1\n    };\n}\nexport function getWeekViewHeader(_a) {\n    var viewDate = _a.viewDate, weekStartsOn = _a.weekStartsOn, _b = _a.excluded, excluded = _b === void 0 ? [] : _b, weekendDays = _a.weekendDays;\n    var start = startOfWeek(viewDate, { weekStartsOn: weekStartsOn });\n    var days = [];\n    var _loop_2 = function (i) {\n        var date = addDays(start, i);\n        if (!excluded.some(function (e) { return date.getDay() === e; })) {\n            days.push(getWeekDay({ date: date, weekendDays: weekendDays }));\n        }\n    };\n    for (var i = 0; i < DAYS_IN_WEEK; i++) {\n        _loop_2(i);\n    }\n    return days;\n}\nexport function getWeekView(_a) {\n    var _b = _a.events, events = _b === void 0 ? [] : _b, viewDate = _a.viewDate, weekStartsOn = _a.weekStartsOn, _c = _a.excluded, excluded = _c === void 0 ? [] : _c, _d = _a.precision, precision = _d === void 0 ? 'days' : _d, _e = _a.absolutePositionedEvents, absolutePositionedEvents = _e === void 0 ? false : _e;\n    if (!events) {\n        events = [];\n    }\n    var startOfViewWeek = startOfWeek(viewDate, { weekStartsOn: weekStartsOn });\n    var endOfViewWeek = endOfWeek(viewDate, { weekStartsOn: weekStartsOn });\n    var maxRange = DAYS_IN_WEEK - excluded.length;\n    var eventsInPeriod = getEventsInPeriod({\n        events: events,\n        periodStart: startOfViewWeek,\n        periodEnd: endOfViewWeek\n    });\n    var eventsMapped = eventsInPeriod\n        .map(function (event) {\n        var offset = getWeekViewEventOffset({\n            event: event,\n            startOfWeek: startOfViewWeek,\n            excluded: excluded,\n            precision: precision\n        });\n        var span = getWeekViewEventSpan({\n            event: event,\n            offset: offset,\n            startOfWeekDate: startOfViewWeek,\n            excluded: excluded,\n            precision: precision\n        });\n        return { event: event, offset: offset, span: span };\n    })\n        .filter(function (e) { return e.offset < maxRange; })\n        .filter(function (e) { return e.span > 0; })\n        .map(function (entry) {\n        return ({\n            event: entry.event,\n            offset: entry.offset,\n            span: entry.span,\n            startsBeforeWeek: entry.event.start < startOfViewWeek,\n            endsAfterWeek: (entry.event.end || entry.event.start) > endOfViewWeek\n        });\n    })\n        .sort(function (itemA, itemB) {\n        var startSecondsDiff = differenceInSeconds(itemA.event.start, itemB.event.start);\n        if (startSecondsDiff === 0) {\n            return differenceInSeconds(itemB.event.end || itemB.event.start, itemA.event.end || itemA.event.start);\n        }\n        return startSecondsDiff;\n    });\n    var eventRows = [];\n    var allocatedEvents = [];\n    eventsMapped.forEach(function (event, index) {\n        if (allocatedEvents.indexOf(event) === -1) {\n            allocatedEvents.push(event);\n            var rowSpan_1 = event.span + event.offset;\n            var otherRowEvents = eventsMapped\n                .slice(index + 1)\n                .filter(function (nextEvent) {\n                if (nextEvent.offset >= rowSpan_1 &&\n                    rowSpan_1 + nextEvent.span <= DAYS_IN_WEEK &&\n                    allocatedEvents.indexOf(nextEvent) === -1) {\n                    var nextEventOffset = nextEvent.offset - rowSpan_1;\n                    if (!absolutePositionedEvents) {\n                        nextEvent.offset = nextEventOffset;\n                    }\n                    rowSpan_1 += nextEvent.span + nextEventOffset;\n                    allocatedEvents.push(nextEvent);\n                    return true;\n                }\n            });\n            eventRows.push({\n                row: [event].concat(otherRowEvents)\n            });\n        }\n    });\n    return {\n        eventRows: eventRows,\n        period: {\n            events: eventsInPeriod,\n            start: startOfViewWeek,\n            end: endOfViewWeek\n        }\n    };\n}\nexport function getMonthView(_a) {\n    var _b = _a.events, events = _b === void 0 ? [] : _b, viewDate = _a.viewDate, weekStartsOn = _a.weekStartsOn, _c = _a.excluded, excluded = _c === void 0 ? [] : _c, _d = _a.viewStart, viewStart = _d === void 0 ? startOfMonth(viewDate) : _d, _e = _a.viewEnd, viewEnd = _e === void 0 ? endOfMonth(viewDate) : _e, weekendDays = _a.weekendDays;\n    if (!events) {\n        events = [];\n    }\n    var start = startOfWeek(viewStart, { weekStartsOn: weekStartsOn });\n    var end = endOfWeek(viewEnd, { weekStartsOn: weekStartsOn });\n    var eventsInMonth = getEventsInPeriod({\n        events: events,\n        periodStart: start,\n        periodEnd: end\n    });\n    var initialViewDays = [];\n    var previousDate;\n    var _loop_3 = function (i) {\n        // hacky fix for https://github.com/mattlewis92/angular-calendar/issues/173\n        var date;\n        if (previousDate) {\n            date = startOfDay(addHours(previousDate, HOURS_IN_DAY));\n            if (previousDate.getTime() === date.getTime()) {\n                // DST change, so need to add 25 hours\n                date = startOfDay(addHours(previousDate, HOURS_IN_DAY + 1));\n            }\n            previousDate = date;\n        }\n        else {\n            date = previousDate = start;\n        }\n        if (!excluded.some(function (e) { return date.getDay() === e; })) {\n            var day = getWeekDay({\n                date: date,\n                weekendDays: weekendDays\n            });\n            var eventsInPeriod = getEventsInPeriod({\n                events: eventsInMonth,\n                periodStart: startOfDay(date),\n                periodEnd: endOfDay(date)\n            });\n            day.inMonth = isSameMonth(date, viewDate);\n            day.events = eventsInPeriod;\n            day.badgeTotal = eventsInPeriod.length;\n            initialViewDays.push(day);\n        }\n    };\n    for (var i = 0; i < differenceInDays(end, start) + 1; i++) {\n        _loop_3(i);\n    }\n    var days = [];\n    var totalDaysVisibleInWeek = DAYS_IN_WEEK - excluded.length;\n    if (totalDaysVisibleInWeek < DAYS_IN_WEEK) {\n        for (var i = 0; i < initialViewDays.length; i += totalDaysVisibleInWeek) {\n            var row = initialViewDays.slice(i, i + totalDaysVisibleInWeek);\n            var isRowInMonth = row.some(function (day) { return day.date.getMonth() === viewDate.getMonth(); });\n            if (isRowInMonth) {\n                days = days.concat(row);\n            }\n        }\n    }\n    else {\n        days = initialViewDays;\n    }\n    var rows = Math.floor(days.length / totalDaysVisibleInWeek);\n    var rowOffsets = [];\n    for (var i = 0; i < rows; i++) {\n        rowOffsets.push(i * totalDaysVisibleInWeek);\n    }\n    return {\n        rowOffsets: rowOffsets,\n        totalDaysVisibleInWeek: totalDaysVisibleInWeek,\n        days: days,\n        period: {\n            start: start,\n            end: end,\n            events: eventsInMonth\n        }\n    };\n}\nexport function getDayView(_a) {\n    var _b = _a.events, events = _b === void 0 ? [] : _b, viewDate = _a.viewDate, hourSegments = _a.hourSegments, dayStart = _a.dayStart, dayEnd = _a.dayEnd, eventWidth = _a.eventWidth, segmentHeight = _a.segmentHeight;\n    if (!events) {\n        events = [];\n    }\n    var startOfView = setMinutes(setHours(startOfDay(viewDate), dayStart.hour), dayStart.minute);\n    var endOfView = setMinutes(setHours(startOfMinute(endOfDay(viewDate)), dayEnd.hour), dayEnd.minute);\n    var previousDayEvents = [];\n    var eventsInPeriod = getEventsInPeriod({\n        events: events.filter(function (event) { return !event.allDay; }),\n        periodStart: startOfView,\n        periodEnd: endOfView\n    });\n    var dayViewEvents = eventsInPeriod\n        .sort(function (eventA, eventB) {\n        return eventA.start.valueOf() - eventB.start.valueOf();\n    })\n        .map(function (event) {\n        var eventStart = event.start;\n        var eventEnd = event.end || eventStart;\n        var startsBeforeDay = eventStart < startOfView;\n        var endsAfterDay = eventEnd > endOfView;\n        var hourHeightModifier = hourSegments * segmentHeight / MINUTES_IN_HOUR;\n        var top = 0;\n        if (eventStart > startOfView) {\n            top += differenceInMinutes(eventStart, startOfView);\n        }\n        top *= hourHeightModifier;\n        var startDate = startsBeforeDay ? startOfView : eventStart;\n        var endDate = endsAfterDay ? endOfView : eventEnd;\n        var height = differenceInMinutes(endDate, startDate);\n        if (!event.end) {\n            height = segmentHeight;\n        }\n        else {\n            height *= hourHeightModifier;\n        }\n        var bottom = top + height;\n        var overlappingPreviousEvents = previousDayEvents.filter(function (previousEvent) {\n            var previousEventTop = previousEvent.top;\n            var previousEventBottom = previousEvent.top + previousEvent.height;\n            if (top < previousEventBottom && previousEventBottom < bottom) {\n                return true;\n            }\n            else if (previousEventTop <= top && bottom <= previousEventBottom) {\n                return true;\n            }\n            return false;\n        });\n        var left = 0;\n        while (overlappingPreviousEvents.some(function (previousEvent) { return previousEvent.left === left; })) {\n            left += eventWidth;\n        }\n        var dayEvent = {\n            event: event,\n            height: height,\n            width: eventWidth,\n            top: top,\n            left: left,\n            startsBeforeDay: startsBeforeDay,\n            endsAfterDay: endsAfterDay\n        };\n        if (height > 0) {\n            previousDayEvents.push(dayEvent);\n        }\n        return dayEvent;\n    })\n        .filter(function (dayEvent) { return dayEvent.height > 0; });\n    var width = Math.max.apply(Math, dayViewEvents.map(function (event) { return event.left + event.width; }));\n    var allDayEvents = getEventsInPeriod({\n        events: events.filter(function (event) { return event.allDay; }),\n        periodStart: startOfDay(startOfView),\n        periodEnd: endOfDay(endOfView)\n    });\n    return {\n        events: dayViewEvents,\n        width: width,\n        allDayEvents: allDayEvents,\n        period: {\n            events: eventsInPeriod,\n            start: startOfView,\n            end: endOfView\n        }\n    };\n}\nexport function getDayViewHourGrid(_a) {\n    var viewDate = _a.viewDate, hourSegments = _a.hourSegments, dayStart = _a.dayStart, dayEnd = _a.dayEnd;\n    var hours = [];\n    var startOfView = setMinutes(setHours(startOfDay(viewDate), dayStart.hour), dayStart.minute);\n    var endOfView = setMinutes(setHours(startOfMinute(endOfDay(viewDate)), dayEnd.hour), dayEnd.minute);\n    var segmentDuration = MINUTES_IN_HOUR / hourSegments;\n    var startOfViewDay = startOfDay(viewDate);\n    for (var i = 0; i < HOURS_IN_DAY; i++) {\n        var segments = [];\n        for (var j = 0; j < hourSegments; j++) {\n            var date = addMinutes(addHours(startOfViewDay, i), j * segmentDuration);\n            if (date >= startOfView && date < endOfView) {\n                segments.push({\n                    date: date,\n                    isStart: j === 0\n                });\n            }\n        }\n        if (segments.length > 0) {\n            hours.push({ segments: segments });\n        }\n    }\n    return hours;\n}\nexport var EventValidationErrorMessage;\n(function (EventValidationErrorMessage) {\n    EventValidationErrorMessage[\"NotArray\"] = \"Events must be an array\";\n    EventValidationErrorMessage[\"StartPropertyMissing\"] = \"Event is missing the `start` property\";\n    EventValidationErrorMessage[\"StartPropertyNotDate\"] = \"Event `start` property should be a javascript date object. Do `new Date(event.start)` to fix it.\";\n    EventValidationErrorMessage[\"EndPropertyNotDate\"] = \"Event `end` property should be a javascript date object. Do `new Date(event.end)` to fix it.\";\n    EventValidationErrorMessage[\"EndsBeforeStart\"] = \"Event `start` property occurs after the `end`\";\n})(EventValidationErrorMessage || (EventValidationErrorMessage = {}));\nexport function validateEvents(events, log) {\n    var isValid = true;\n    function isError(msg, event) {\n        log(msg, event);\n        isValid = false;\n    }\n    if (!Array.isArray(events)) {\n        log(EventValidationErrorMessage.NotArray, events);\n        return false;\n    }\n    events.forEach(function (event) {\n        if (!event.start) {\n            isError(EventValidationErrorMessage.StartPropertyMissing, event);\n        }\n        else if (!isDate(event.start)) {\n            isError(EventValidationErrorMessage.StartPropertyNotDate, event);\n        }\n        if (event.end) {\n            if (!isDate(event.end)) {\n                isError(EventValidationErrorMessage.EndPropertyNotDate, event);\n            }\n            if (event.start > event.end) {\n                isError(EventValidationErrorMessage.EndsBeforeStart, event);\n            }\n        }\n    });\n    return isValid;\n}\n\n\n\n",{"version":3,"file":"D:\\Code MWSC\\2020-MWSC-Github\\webapps\\node_modules\\calendar-utils\\dist\\calendar-utils.js.post-build-optimizer.js","sourceRoot":"","sources":["D:\\Code MWSC\\2020-MWSC-Github\\webapps\\node_modules\\calendar-utils\\dist\\calendar-utils.js.pre-build-optimizer.js"],"names":[],"mappings":"AAAA,OAAO,OAAO,MAAM,mBAAmB,CAAC;AACxC,OAAO,QAAQ,MAAM,oBAAoB,CAAC;AAC1C,OAAO,UAAU,MAAM,sBAAsB,CAAC;AAC9C,OAAO,UAAU,MAAM,sBAAsB,CAAC;AAC9C,OAAO,gBAAgB,MAAM,6BAA6B,CAAC;AAC3D,OAAO,mBAAmB,MAAM,gCAAgC,CAAC;AACjE,OAAO,mBAAmB,MAAM,gCAAgC,CAAC;AACjE,OAAO,QAAQ,MAAM,qBAAqB,CAAC;AAC3C,OAAO,UAAU,MAAM,uBAAuB,CAAC;AAC/C,OAAO,SAAS,MAAM,sBAAsB,CAAC;AAC7C,OAAO,MAAM,MAAM,kBAAkB,CAAC;AACtC,OAAO,MAAM,MAAM,kBAAkB,CAAC;AACtC,OAAO,SAAS,MAAM,sBAAsB,CAAC;AAC7C,OAAO,WAAW,MAAM,wBAAwB,CAAC;AACjD,OAAO,YAAY,MAAM,yBAAyB,CAAC;AACnD,OAAO,GAAG,MAAM,cAAc,CAAC;AAC/B,OAAO,QAAQ,MAAM,oBAAoB,CAAC;AAC1C,OAAO,UAAU,MAAM,sBAAsB,CAAC;AAC9C,OAAO,UAAU,MAAM,uBAAuB,CAAC;AAC/C,OAAO,aAAa,MAAM,0BAA0B,CAAC;AACrD,OAAO,YAAY,MAAM,yBAAyB,CAAC;AACnD,OAAO,WAAW,MAAM,wBAAwB,CAAC;AACjD,MAAM,CAAC,IAAI,YAAY,iBACvB,CAAC,UAAU,YAAY;IACnB,YAAY,CAAC,YAAY,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC;IACpD,YAAY,CAAC,YAAY,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC;IACpD,YAAY,CAAC,YAAY,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC;IACtD,YAAY,CAAC,YAAY,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,GAAG,WAAW,CAAC;IAC1D,YAAY,CAAC,YAAY,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,GAAG,UAAU,CAAC;IACxD,YAAY,CAAC,YAAY,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC;IACpD,YAAY,CAAC,YAAY,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,GAAG,UAAU,CAAC;WAPjD,YAAY;CAQtB,CAAC,IAAqC,AAThB,CAAC;AAUxB,IAAI,oBAAoB,GAAG;IACvB,YAAY,CAAC,MAAM;IACnB,YAAY,CAAC,QAAQ;CACxB,CAAC;AACF,IAAI,YAAY,GAAG,CAAC,CAAC;AACrB,IAAI,YAAY,GAAG,EAAE,CAAC;AACtB,IAAI,eAAe,GAAG,EAAE,CAAC;AACzB,MAAM,CAAC,IAAI,cAAc,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;AACzC,MAAM,CAAC,IAAI,eAAe,GAAG,cAAc,GAAG,YAAY,CAAC;AAC3D,4BAA4B,EAAE;IAC1B,IAAI,SAAS,GAAG,EAAE,CAAC,SAAS,EAAE,OAAO,GAAG,EAAE,CAAC,OAAO,EAAE,QAAQ,GAAG,EAAE,CAAC,QAAQ,EAAE,EAAE,GAAG,EAAE,CAAC,SAAS,EAAE,SAAS,GAAG,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC;IACvI,EAAE,CAAC,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;QACtB,MAAM,CAAC,CAAC,CAAC;IACb,CAAC;IACD,IAAI,OAAO,GAAG,UAAU,CAAC,SAAS,EAAE,OAAO,GAAG,CAAC,CAAC,CAAC;IACjD,IAAI,QAAQ,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC;IACjC,IAAI,MAAM,GAAG,MAAM,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC;IAC5C,IAAI,MAAM,GAAG,CAAC,CAAC,CAAC,wBAAwB;IACxC,IAAI,OAAO,GAAG,SAAS,CAAC;IACxB,IAAI,OAAO,GAAG;QACV,IAAI,GAAG,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC;QAC1B,EAAE,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,WAAW,IAAI,MAAM,CAAC,WAAW,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACxE,MAAM,IAAI,wBAAwB,CAAC;gBAC/B,QAAQ,EAAE,QAAQ;gBAClB,MAAM,EAAE,MAAM;gBACd,GAAG,EAAE,GAAG;gBACR,SAAS,EAAE,SAAS;gBACpB,SAAS,EAAE,SAAS;gBACpB,OAAO,EAAE,OAAO;aACnB,CAAC,CAAC;QACP,CAAC;QACD,OAAO,GAAG,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;IAClC,CAAC,CAAC;IACF,OAAO,OAAO,GAAG,OAAO,EAAE,CAAC;QACvB,OAAO,EAAE,CAAC;IACd,CAAC;IACD,MAAM,CAAC,MAAM,CAAC;AAClB,CAAC;AACD,kCAAkC,EAAE;IAChC,IAAI,SAAS,GAAG,EAAE,CAAC,SAAS,EAAE,GAAG,GAAG,EAAE,CAAC,GAAG,EAAE,QAAQ,GAAG,EAAE,CAAC,QAAQ,EAAE,MAAM,GAAG,EAAE,CAAC,MAAM,EAAE,SAAS,GAAG,EAAE,CAAC,SAAS,EAAE,OAAO,GAAG,EAAE,CAAC,OAAO,CAAC;IACvI,EAAE,CAAC,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC;QAC1B,EAAE,CAAC,CAAC,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC;YACnB,MAAM,CAAC,mBAAmB,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,SAAS,CAAC,GAAG,CAAC,CAAC;QACnE,CAAC;QACD,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,KAAK,MAAM,CAAC,CAAC,CAAC;YACtB,MAAM,CAAC,mBAAmB,CAAC,OAAO,EAAE,UAAU,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC;QACjE,CAAC;IACL,CAAC;IACD,MAAM,CAAC,cAAc,CAAC;AAC1B,CAAC;AACD,8BAA8B,EAAE;IAC5B,IAAI,KAAK,GAAG,EAAE,CAAC,KAAK,EAAE,MAAM,GAAG,EAAE,CAAC,MAAM,EAAE,eAAe,GAAG,EAAE,CAAC,eAAe,EAAE,QAAQ,GAAG,EAAE,CAAC,QAAQ,EAAE,EAAE,GAAG,EAAE,CAAC,SAAS,EAAE,SAAS,GAAG,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC;IACnK,IAAI,IAAI,GAAG,cAAc,CAAC;IAC1B,IAAI,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC,KAAK,EAAE,eAAe,CAAC,CAAC;IAC9C,EAAE,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;QACZ,MAAM,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;YAChB,KAAK,SAAS;gBACV,IAAI,GAAG,mBAAmB,CAAC,KAAK,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;gBAC7C,KAAK,CAAC;YACV;gBACI,IAAI;oBACA,gBAAgB,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC;wBACpD,cAAc,CAAC;gBACvB,KAAK,CAAC;QACd,CAAC;IACL,CAAC;IACD,IAAI,aAAa,GAAG,MAAM,GAAG,cAAc,CAAC;IAC5C,IAAI,WAAW,GAAG,aAAa,GAAG,IAAI,CAAC;IACvC,8DAA8D;IAC9D,6FAA6F;IAC7F,EAAE,CAAC,CAAC,WAAW,GAAG,eAAe,CAAC,CAAC,CAAC;QAChC,IAAI,GAAG,eAAe,GAAG,aAAa,CAAC;IAC3C,CAAC;IACD,IAAI,IAAI,kBAAkB,CAAC;QACvB,SAAS,EAAE,KAAK;QAChB,OAAO,EAAE,IAAI;QACb,QAAQ,EAAE,QAAQ;QAClB,SAAS,EAAE,SAAS;KACvB,CAAC,CAAC;IACH,MAAM,CAAC,IAAI,GAAG,cAAc,CAAC;AACjC,CAAC;AACD,MAAM,iCAAiC,EAAE;IACrC,IAAI,KAAK,GAAG,EAAE,CAAC,KAAK,EAAE,eAAe,GAAG,EAAE,CAAC,WAAW,EAAE,EAAE,GAAG,EAAE,CAAC,QAAQ,EAAE,QAAQ,GAAG,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,SAAS,EAAE,SAAS,GAAG,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC;IACzK,EAAE,CAAC,CAAC,KAAK,CAAC,KAAK,GAAG,eAAe,CAAC,CAAC,CAAC;QAChC,MAAM,CAAC,CAAC,CAAC;IACb,CAAC;IACD,IAAI,MAAM,GAAG,CAAC,CAAC;IACf,MAAM,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;QAChB,KAAK,MAAM;YACP,MAAM;gBACF,gBAAgB,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE,eAAe,CAAC;oBACtD,cAAc,CAAC;YACvB,KAAK,CAAC;QACV,KAAK,SAAS;YACV,MAAM,GAAG,mBAAmB,CAAC,KAAK,CAAC,KAAK,EAAE,eAAe,CAAC,CAAC;YAC3D,KAAK,CAAC;IACd,CAAC;IACD,MAAM,IAAI,kBAAkB,CAAC;QACzB,SAAS,EAAE,eAAe;QAC1B,OAAO,EAAE,MAAM;QACf,QAAQ,EAAE,QAAQ;QAClB,SAAS,EAAE,SAAS;KACvB,CAAC,CAAC;IACH,MAAM,CAAC,MAAM,GAAG,cAAc,CAAC;AACnC,CAAC;AACD,yBAAyB,EAAE;IACvB,IAAI,KAAK,GAAG,EAAE,CAAC,KAAK,EAAE,WAAW,GAAG,EAAE,CAAC,WAAW,EAAE,SAAS,GAAG,EAAE,CAAC,SAAS,CAAC;IAC7E,IAAI,UAAU,GAAG,KAAK,CAAC,KAAK,CAAC;IAC7B,IAAI,QAAQ,GAAG,KAAK,CAAC,GAAG,IAAI,KAAK,CAAC,KAAK,CAAC;IACxC,EAAE,CAAC,CAAC,UAAU,GAAG,WAAW,IAAI,UAAU,GAAG,SAAS,CAAC,CAAC,CAAC;QACrD,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IACD,EAAE,CAAC,CAAC,QAAQ,GAAG,WAAW,IAAI,QAAQ,GAAG,SAAS,CAAC,CAAC,CAAC;QACjD,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IACD,EAAE,CAAC,CAAC,UAAU,GAAG,WAAW,IAAI,QAAQ,GAAG,SAAS,CAAC,CAAC,CAAC;QACnD,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IACD,EAAE,CAAC,CAAC,YAAY,CAAC,UAAU,EAAE,WAAW,CAAC;QACrC,YAAY,CAAC,UAAU,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC;QACtC,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IACD,EAAE,CAAC,CAAC,YAAY,CAAC,QAAQ,EAAE,WAAW,CAAC;QACnC,YAAY,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC;QACpC,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC;IACD,MAAM,CAAC,KAAK,CAAC;AACjB,CAAC;AACD,MAAM,4BAA4B,EAAE;IAChC,IAAI,MAAM,GAAG,EAAE,CAAC,MAAM,EAAE,WAAW,GAAG,EAAE,CAAC,WAAW,EAAE,SAAS,GAAG,EAAE,CAAC,SAAS,CAAC;IAC/E,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU,KAAK;QAChC,MAAM,CAAC,eAAe,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,WAAW,EAAE,WAAW,EAAE,SAAS,EAAE,SAAS,EAAE,CAAC,CAAC;IAC7F,CAAC,CAAC,CAAC;AACP,CAAC;AACD,oBAAoB,EAAE;IAClB,IAAI,IAAI,GAAG,EAAE,CAAC,IAAI,EAAE,EAAE,GAAG,EAAE,CAAC,WAAW,EAAE,WAAW,GAAG,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAAC,EAAE,CAAC;IACjG,IAAI,KAAK,GAAG,UAAU,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC;IACnC,MAAM,CAAC;QACH,IAAI,EAAE,IAAI;QACV,MAAM,EAAE,IAAI,GAAG,KAAK;QACpB,OAAO,EAAE,SAAS,CAAC,IAAI,EAAE,KAAK,CAAC;QAC/B,QAAQ,EAAE,IAAI,GAAG,KAAK;QACtB,SAAS,EAAE,WAAW,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;KACpD,CAAC;AACN,CAAC;AACD,MAAM,4BAA4B,EAAE;IAChC,IAAI,QAAQ,GAAG,EAAE,CAAC,QAAQ,EAAE,YAAY,GAAG,EAAE,CAAC,YAAY,EAAE,EAAE,GAAG,EAAE,CAAC,QAAQ,EAAE,QAAQ,GAAG,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,WAAW,GAAG,EAAE,CAAC,WAAW,CAAC;IAC/I,IAAI,KAAK,GAAG,WAAW,CAAC,QAAQ,EAAE,EAAE,YAAY,EAAE,YAAY,EAAE,CAAC,CAAC;IAClE,IAAI,IAAI,GAAG,EAAE,CAAC;IACd,IAAI,OAAO,GAAG,UAAU,CAAC;QACrB,IAAI,IAAI,GAAG,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QAC7B,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/D,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,WAAW,EAAE,WAAW,EAAE,CAAC,CAAC,CAAC;QACpE,CAAC;IACL,CAAC,CAAC;IACF,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,YAAY,EAAE,CAAC,EAAE,EAAE,CAAC;QACpC,OAAO,CAAC,CAAC,CAAC,CAAC;IACf,CAAC;IACD,MAAM,CAAC,IAAI,CAAC;AAChB,CAAC;AACD,MAAM,sBAAsB,EAAE;IAC1B,IAAI,EAAE,GAAG,EAAE,CAAC,MAAM,EAAE,MAAM,GAAG,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,QAAQ,GAAG,EAAE,CAAC,QAAQ,EAAE,YAAY,GAAG,EAAE,CAAC,YAAY,EAAE,EAAE,GAAG,EAAE,CAAC,QAAQ,EAAE,QAAQ,GAAG,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,SAAS,EAAE,SAAS,GAAG,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,wBAAwB,EAAE,wBAAwB,GAAG,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC;IACxT,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;QACV,MAAM,GAAG,EAAE,CAAC;IAChB,CAAC;IACD,IAAI,eAAe,GAAG,WAAW,CAAC,QAAQ,EAAE,EAAE,YAAY,EAAE,YAAY,EAAE,CAAC,CAAC;IAC5E,IAAI,aAAa,GAAG,SAAS,CAAC,QAAQ,EAAE,EAAE,YAAY,EAAE,YAAY,EAAE,CAAC,CAAC;IACxE,IAAI,QAAQ,GAAG,YAAY,GAAG,QAAQ,CAAC,MAAM,CAAC;IAC9C,IAAI,cAAc,GAAG,iBAAiB,CAAC;QACnC,MAAM,EAAE,MAAM;QACd,WAAW,EAAE,eAAe;QAC5B,SAAS,EAAE,aAAa;KAC3B,CAAC,CAAC;IACH,IAAI,YAAY,GAAG,cAAc;SAC5B,GAAG,CAAC,UAAU,KAAK;QACpB,IAAI,MAAM,GAAG,sBAAsB,CAAC;YAChC,KAAK,EAAE,KAAK;YACZ,WAAW,EAAE,eAAe;YAC5B,QAAQ,EAAE,QAAQ;YAClB,SAAS,EAAE,SAAS;SACvB,CAAC,CAAC;QACH,IAAI,IAAI,GAAG,oBAAoB,CAAC;YAC5B,KAAK,EAAE,KAAK;YACZ,MAAM,EAAE,MAAM;YACd,eAAe,EAAE,eAAe;YAChC,QAAQ,EAAE,QAAQ;YAClB,SAAS,EAAE,SAAS;SACvB,CAAC,CAAC;QACH,MAAM,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC;IACxD,CAAC,CAAC;SACG,MAAM,CAAC,UAAU,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,MAAM,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;SACpD,MAAM,CAAC,UAAU,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;SAC3C,GAAG,CAAC,UAAU,KAAK;QAAI,MAAM,CAAC,CAAC;YAChC,KAAK,EAAE,KAAK,CAAC,KAAK;YAClB,MAAM,EAAE,KAAK,CAAC,MAAM;YACpB,IAAI,EAAE,KAAK,CAAC,IAAI;YAChB,gBAAgB,EAAE,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,eAAe;YACrD,aAAa,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,IAAI,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,aAAa;SACxE,CAAC,CAAC;IAAC,CAAC,CAAC;SACD,IAAI,CAAC,UAAU,KAAK,EAAE,KAAK;QAC5B,IAAI,gBAAgB,GAAG,mBAAmB,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QACjF,EAAE,CAAC,CAAC,gBAAgB,KAAK,CAAC,CAAC,CAAC,CAAC;YACzB,MAAM,CAAC,mBAAmB,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,IAAI,KAAK,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,KAAK,CAAC,GAAG,IAAI,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAC3G,CAAC;QACD,MAAM,CAAC,gBAAgB,CAAC;IAC5B,CAAC,CAAC,CAAC;IACH,IAAI,SAAS,GAAG,EAAE,CAAC;IACnB,IAAI,eAAe,GAAG,EAAE,CAAC;IACzB,YAAY,CAAC,OAAO,CAAC,UAAU,KAAK,EAAE,KAAK;QACvC,EAAE,CAAC,CAAC,eAAe,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YACxC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC5B,IAAI,SAAS,GAAG,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC;YAC1C,IAAI,cAAc,GAAG,YAAY;iBAC5B,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC;iBAChB,MAAM,CAAC,UAAU,SAAS;gBAC3B,EAAE,CAAC,CAAC,SAAS,CAAC,MAAM,IAAI,SAAS;oBAC7B,SAAS,GAAG,SAAS,CAAC,IAAI,IAAI,YAAY;oBAC1C,eAAe,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC5C,IAAI,eAAe,GAAG,SAAS,CAAC,MAAM,GAAG,SAAS,CAAC;oBACnD,EAAE,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,CAAC;wBAC5B,SAAS,CAAC,MAAM,GAAG,eAAe,CAAC;oBACvC,CAAC;oBACD,SAAS,IAAI,SAAS,CAAC,IAAI,GAAG,eAAe,CAAC;oBAC9C,eAAe,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;oBAChC,MAAM,CAAC,IAAI,CAAC;gBAChB,CAAC;YACL,CAAC,CAAC,CAAC;YACH,SAAS,CAAC,IAAI,CAAC;gBACX,GAAG,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,cAAc,CAAC;aACtC,CAAC,CAAC;QACP,CAAC;IACL,CAAC,CAAC,CAAC;IACH,MAAM,CAAC;QACH,SAAS,EAAE,SAAS;QACpB,MAAM,EAAE;YACJ,MAAM,EAAE,cAAc;YACtB,KAAK,EAAE,eAAe;YACtB,GAAG,EAAE,aAAa;SACrB;KACJ,CAAC;AACN,CAAC;AACD,MAAM,uBAAuB,EAAE;IAC3B,IAAI,EAAE,GAAG,EAAE,CAAC,MAAM,EAAE,MAAM,GAAG,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,QAAQ,GAAG,EAAE,CAAC,QAAQ,EAAE,YAAY,GAAG,EAAE,CAAC,YAAY,EAAE,EAAE,GAAG,EAAE,CAAC,QAAQ,EAAE,QAAQ,GAAG,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,SAAS,EAAE,SAAS,GAAG,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,OAAO,EAAE,OAAO,GAAG,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,WAAW,GAAG,EAAE,CAAC,WAAW,CAAC;IACnV,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;QACV,MAAM,GAAG,EAAE,CAAC;IAChB,CAAC;IACD,IAAI,KAAK,GAAG,WAAW,CAAC,SAAS,EAAE,EAAE,YAAY,EAAE,YAAY,EAAE,CAAC,CAAC;IACnE,IAAI,GAAG,GAAG,SAAS,CAAC,OAAO,EAAE,EAAE,YAAY,EAAE,YAAY,EAAE,CAAC,CAAC;IAC7D,IAAI,aAAa,GAAG,iBAAiB,CAAC;QAClC,MAAM,EAAE,MAAM;QACd,WAAW,EAAE,KAAK;QAClB,SAAS,EAAE,GAAG;KACjB,CAAC,CAAC;IACH,IAAI,eAAe,GAAG,EAAE,CAAC;IACzB,IAAI,YAAY,CAAC;IACjB,IAAI,OAAO,GAAG,UAAU,CAAC;QACrB,2EAA2E;QAC3E,IAAI,IAAI,CAAC;QACT,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;YACf,IAAI,GAAG,UAAU,CAAC,QAAQ,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC,CAAC;YACxD,EAAE,CAAC,CAAC,YAAY,CAAC,OAAO,EAAE,KAAK,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;gBAC5C,sCAAsC;gBACtC,IAAI,GAAG,UAAU,CAAC,QAAQ,CAAC,YAAY,EAAE,YAAY,GAAG,CAAC,CAAC,CAAC,CAAC;YAChE,CAAC;YACD,YAAY,GAAG,IAAI,CAAC;QACxB,CAAC;QACD,IAAI,CAAC,CAAC;YACF,IAAI,GAAG,YAAY,GAAG,KAAK,CAAC;QAChC,CAAC;QACD,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/D,IAAI,GAAG,GAAG,UAAU,CAAC;gBACjB,IAAI,EAAE,IAAI;gBACV,WAAW,EAAE,WAAW;aAC3B,CAAC,CAAC;YACH,IAAI,cAAc,GAAG,iBAAiB,CAAC;gBACnC,MAAM,EAAE,aAAa;gBACrB,WAAW,EAAE,UAAU,CAAC,IAAI,CAAC;gBAC7B,SAAS,EAAE,QAAQ,CAAC,IAAI,CAAC;aAC5B,CAAC,CAAC;YACH,GAAG,CAAC,OAAO,GAAG,WAAW,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;YAC1C,GAAG,CAAC,MAAM,GAAG,cAAc,CAAC;YAC5B,GAAG,CAAC,UAAU,GAAG,cAAc,CAAC,MAAM,CAAC;YACvC,eAAe,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC9B,CAAC;IACL,CAAC,CAAC;IACF,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,gBAAgB,CAAC,GAAG,EAAE,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;QACxD,OAAO,CAAC,CAAC,CAAC,CAAC;IACf,CAAC;IACD,IAAI,IAAI,GAAG,EAAE,CAAC;IACd,IAAI,sBAAsB,GAAG,YAAY,GAAG,QAAQ,CAAC,MAAM,CAAC;IAC5D,EAAE,CAAC,CAAC,sBAAsB,GAAG,YAAY,CAAC,CAAC,CAAC;QACxC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,eAAe,CAAC,MAAM,EAAE,CAAC,IAAI,sBAAsB,EAAE,CAAC;YACtE,IAAI,GAAG,GAAG,eAAe,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,GAAG,sBAAsB,CAAC,CAAC;YAC/D,IAAI,YAAY,GAAG,GAAG,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,QAAQ,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;YACpG,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;gBACf,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAC5B,CAAC;QACL,CAAC;IACL,CAAC;IACD,IAAI,CAAC,CAAC;QACF,IAAI,GAAG,eAAe,CAAC;IAC3B,CAAC;IACD,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,GAAG,sBAAsB,CAAC,CAAC;IAC5D,IAAI,UAAU,GAAG,EAAE,CAAC;IACpB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,EAAE,EAAE,CAAC;QAC5B,UAAU,CAAC,IAAI,CAAC,CAAC,GAAG,sBAAsB,CAAC,CAAC;IAChD,CAAC;IACD,MAAM,CAAC;QACH,UAAU,EAAE,UAAU;QACtB,sBAAsB,EAAE,sBAAsB;QAC9C,IAAI,EAAE,IAAI;QACV,MAAM,EAAE;YACJ,KAAK,EAAE,KAAK;YACZ,GAAG,EAAE,GAAG;YACR,MAAM,EAAE,aAAa;SACxB;KACJ,CAAC;AACN,CAAC;AACD,MAAM,qBAAqB,EAAE;IACzB,IAAI,EAAE,GAAG,EAAE,CAAC,MAAM,EAAE,MAAM,GAAG,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,QAAQ,GAAG,EAAE,CAAC,QAAQ,EAAE,YAAY,GAAG,EAAE,CAAC,YAAY,EAAE,QAAQ,GAAG,EAAE,CAAC,QAAQ,EAAE,MAAM,GAAG,EAAE,CAAC,MAAM,EAAE,UAAU,GAAG,EAAE,CAAC,UAAU,EAAE,aAAa,GAAG,EAAE,CAAC,aAAa,CAAC;IACvN,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;QACV,MAAM,GAAG,EAAE,CAAC;IAChB,CAAC;IACD,IAAI,WAAW,GAAG,UAAU,CAAC,QAAQ,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE,QAAQ,CAAC,IAAI,CAAC,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAC;IAC7F,IAAI,SAAS,GAAG,UAAU,CAAC,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;IACpG,IAAI,iBAAiB,GAAG,EAAE,CAAC;IAC3B,IAAI,cAAc,GAAG,iBAAiB,CAAC;QACnC,MAAM,EAAE,MAAM,CAAC,MAAM,CAAC,UAAU,KAAK,IAAI,MAAM,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QACjE,WAAW,EAAE,WAAW;QACxB,SAAS,EAAE,SAAS;KACvB,CAAC,CAAC;IACH,IAAI,aAAa,GAAG,cAAc;SAC7B,IAAI,CAAC,UAAU,MAAM,EAAE,MAAM;QAC9B,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,EAAE,GAAG,MAAM,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;IAC3D,CAAC,CAAC;SACG,GAAG,CAAC,UAAU,KAAK;QACpB,IAAI,UAAU,GAAG,KAAK,CAAC,KAAK,CAAC;QAC7B,IAAI,QAAQ,GAAG,KAAK,CAAC,GAAG,IAAI,UAAU,CAAC;QACvC,IAAI,eAAe,GAAG,UAAU,GAAG,WAAW,CAAC;QAC/C,IAAI,YAAY,GAAG,QAAQ,GAAG,SAAS,CAAC;QACxC,IAAI,kBAAkB,GAAG,YAAY,GAAG,aAAa,GAAG,eAAe,CAAC;QACxE,IAAI,GAAG,GAAG,CAAC,CAAC;QACZ,EAAE,CAAC,CAAC,UAAU,GAAG,WAAW,CAAC,CAAC,CAAC;YAC3B,GAAG,IAAI,mBAAmB,CAAC,UAAU,EAAE,WAAW,CAAC,CAAC;QACxD,CAAC;QACD,GAAG,IAAI,kBAAkB,CAAC;QAC1B,IAAI,SAAS,GAAG,eAAe,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,UAAU,CAAC;QAC3D,IAAI,OAAO,GAAG,YAAY,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,QAAQ,CAAC;QAClD,IAAI,MAAM,GAAG,mBAAmB,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;QACrD,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;YACb,MAAM,GAAG,aAAa,CAAC;QAC3B,CAAC;QACD,IAAI,CAAC,CAAC;YACF,MAAM,IAAI,kBAAkB,CAAC;QACjC,CAAC;QACD,IAAI,MAAM,GAAG,GAAG,GAAG,MAAM,CAAC;QAC1B,IAAI,yBAAyB,GAAG,iBAAiB,CAAC,MAAM,CAAC,UAAU,aAAa;YAC5E,IAAI,gBAAgB,GAAG,aAAa,CAAC,GAAG,CAAC;YACzC,IAAI,mBAAmB,GAAG,aAAa,CAAC,GAAG,GAAG,aAAa,CAAC,MAAM,CAAC;YACnE,EAAE,CAAC,CAAC,GAAG,GAAG,mBAAmB,IAAI,mBAAmB,GAAG,MAAM,CAAC,CAAC,CAAC;gBAC5D,MAAM,CAAC,IAAI,CAAC;YAChB,CAAC;YACD,IAAI,CAAC,EAAE,CAAC,CAAC,gBAAgB,IAAI,GAAG,IAAI,MAAM,IAAI,mBAAmB,CAAC,CAAC,CAAC;gBAChE,MAAM,CAAC,IAAI,CAAC;YAChB,CAAC;YACD,MAAM,CAAC,KAAK,CAAC;QACjB,CAAC,CAAC,CAAC;QACH,IAAI,IAAI,GAAG,CAAC,CAAC;QACb,OAAO,yBAAyB,CAAC,IAAI,CAAC,UAAU,aAAa,IAAI,MAAM,CAAC,aAAa,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;YACtG,IAAI,IAAI,UAAU,CAAC;QACvB,CAAC;QACD,IAAI,QAAQ,GAAG;YACX,KAAK,EAAE,KAAK;YACZ,MAAM,EAAE,MAAM;YACd,KAAK,EAAE,UAAU;YACjB,GAAG,EAAE,GAAG;YACR,IAAI,EAAE,IAAI;YACV,eAAe,EAAE,eAAe;YAChC,YAAY,EAAE,YAAY;SAC7B,CAAC;QACF,EAAE,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACb,iBAAiB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACrC,CAAC;QACD,MAAM,CAAC,QAAQ,CAAC;IACpB,CAAC,CAAC;SACG,MAAM,CAAC,UAAU,QAAQ,IAAI,MAAM,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACjE,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,EAAE,aAAa,CAAC,GAAG,CAAC,UAAU,KAAK,IAAI,MAAM,CAAC,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC3G,IAAI,YAAY,GAAG,iBAAiB,CAAC;QACjC,MAAM,EAAE,MAAM,CAAC,MAAM,CAAC,UAAU,KAAK,IAAI,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QAChE,WAAW,EAAE,UAAU,CAAC,WAAW,CAAC;QACpC,SAAS,EAAE,QAAQ,CAAC,SAAS,CAAC;KACjC,CAAC,CAAC;IACH,MAAM,CAAC;QACH,MAAM,EAAE,aAAa;QACrB,KAAK,EAAE,KAAK;QACZ,YAAY,EAAE,YAAY;QAC1B,MAAM,EAAE;YACJ,MAAM,EAAE,cAAc;YACtB,KAAK,EAAE,WAAW;YAClB,GAAG,EAAE,SAAS;SACjB;KACJ,CAAC;AACN,CAAC;AACD,MAAM,6BAA6B,EAAE;IACjC,IAAI,QAAQ,GAAG,EAAE,CAAC,QAAQ,EAAE,YAAY,GAAG,EAAE,CAAC,YAAY,EAAE,QAAQ,GAAG,EAAE,CAAC,QAAQ,EAAE,MAAM,GAAG,EAAE,CAAC,MAAM,CAAC;IACvG,IAAI,KAAK,GAAG,EAAE,CAAC;IACf,IAAI,WAAW,GAAG,UAAU,CAAC,QAAQ,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE,QAAQ,CAAC,IAAI,CAAC,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAC;IAC7F,IAAI,SAAS,GAAG,UAAU,CAAC,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;IACpG,IAAI,eAAe,GAAG,eAAe,GAAG,YAAY,CAAC;IACrD,IAAI,cAAc,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC;IAC1C,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,YAAY,EAAE,CAAC,EAAE,EAAE,CAAC;QACpC,IAAI,QAAQ,GAAG,EAAE,CAAC;QAClB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,YAAY,EAAE,CAAC,EAAE,EAAE,CAAC;YACpC,IAAI,IAAI,GAAG,UAAU,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,eAAe,CAAC,CAAC;YACxE,EAAE,CAAC,CAAC,IAAI,IAAI,WAAW,IAAI,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC;gBAC1C,QAAQ,CAAC,IAAI,CAAC;oBACV,IAAI,EAAE,IAAI;oBACV,OAAO,EAAE,CAAC,KAAK,CAAC;iBACnB,CAAC,CAAC;YACP,CAAC;QACL,CAAC;QACD,EAAE,CAAC,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YACtB,KAAK,CAAC,IAAI,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,CAAC;QACvC,CAAC;IACL,CAAC;IACD,MAAM,CAAC,KAAK,CAAC;AACjB,CAAC;AACD,MAAM,CAAC,IAAI,2BAA2B,CAAC;AACvC,CAAC,UAAU,2BAA2B;IAClC,2BAA2B,CAAC,UAAU,CAAC,GAAG,yBAAyB,CAAC;IACpE,2BAA2B,CAAC,sBAAsB,CAAC,GAAG,uCAAuC,CAAC;IAC9F,2BAA2B,CAAC,sBAAsB,CAAC,GAAG,kGAAkG,CAAC;IACzJ,2BAA2B,CAAC,oBAAoB,CAAC,GAAG,8FAA8F,CAAC;IACnJ,2BAA2B,CAAC,iBAAiB,CAAC,GAAG,+CAA+C,CAAC;AACrG,CAAC,CAAC,CAAC,2BAA2B,IAAI,CAAC,2BAA2B,GAAG,EAAE,CAAC,CAAC,CAAC;AACtE,MAAM,yBAAyB,MAAM,EAAE,GAAG;IACtC,IAAI,OAAO,GAAG,IAAI,CAAC;IACnB,iBAAiB,GAAG,EAAE,KAAK;QACvB,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;QAChB,OAAO,GAAG,KAAK,CAAC;IACpB,CAAC;IACD,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QACzB,GAAG,CAAC,2BAA2B,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;QAClD,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;IACD,MAAM,CAAC,OAAO,CAAC,UAAU,KAAK;QAC1B,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;YACf,OAAO,CAAC,2BAA2B,CAAC,oBAAoB,EAAE,KAAK,CAAC,CAAC;QACrE,CAAC;QACD,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAC5B,OAAO,CAAC,2BAA2B,CAAC,oBAAoB,EAAE,KAAK,CAAC,CAAC;QACrE,CAAC;QACD,EAAE,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;YACZ,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACrB,OAAO,CAAC,2BAA2B,CAAC,kBAAkB,EAAE,KAAK,CAAC,CAAC;YACnE,CAAC;YACD,EAAE,CAAC,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;gBAC1B,OAAO,CAAC,2BAA2B,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC;YAChE,CAAC;QACL,CAAC;IACL,CAAC,CAAC,CAAC;IACH,MAAM,CAAC,OAAO,CAAC;AACnB,CAAC;AACD,0CAA0C","sourcesContent":["import addDays from 'date-fns/add_days';\nimport addHours from 'date-fns/add_hours';\nimport addMinutes from 'date-fns/add_minutes';\nimport addSeconds from 'date-fns/add_seconds';\nimport differenceInDays from 'date-fns/difference_in_days';\nimport differenceInMinutes from 'date-fns/difference_in_minutes';\nimport differenceInSeconds from 'date-fns/difference_in_seconds';\nimport endOfDay from 'date-fns/end_of_day';\nimport endOfMonth from 'date-fns/end_of_month';\nimport endOfWeek from 'date-fns/end_of_week';\nimport getDay from 'date-fns/get_day';\nimport isDate from 'date-fns/is_date';\nimport isSameDay from 'date-fns/is_same_day';\nimport isSameMonth from 'date-fns/is_same_month';\nimport isSameSecond from 'date-fns/is_same_second';\nimport max from 'date-fns/max';\nimport setHours from 'date-fns/set_hours';\nimport setMinutes from 'date-fns/set_minutes';\nimport startOfDay from 'date-fns/start_of_day';\nimport startOfMinute from 'date-fns/start_of_minute';\nimport startOfMonth from 'date-fns/start_of_month';\nimport startOfWeek from 'date-fns/start_of_week';\nexport var DAYS_OF_WEEK;\n(function (DAYS_OF_WEEK) {\n    DAYS_OF_WEEK[DAYS_OF_WEEK[\"SUNDAY\"] = 0] = \"SUNDAY\";\n    DAYS_OF_WEEK[DAYS_OF_WEEK[\"MONDAY\"] = 1] = \"MONDAY\";\n    DAYS_OF_WEEK[DAYS_OF_WEEK[\"TUESDAY\"] = 2] = \"TUESDAY\";\n    DAYS_OF_WEEK[DAYS_OF_WEEK[\"WEDNESDAY\"] = 3] = \"WEDNESDAY\";\n    DAYS_OF_WEEK[DAYS_OF_WEEK[\"THURSDAY\"] = 4] = \"THURSDAY\";\n    DAYS_OF_WEEK[DAYS_OF_WEEK[\"FRIDAY\"] = 5] = \"FRIDAY\";\n    DAYS_OF_WEEK[DAYS_OF_WEEK[\"SATURDAY\"] = 6] = \"SATURDAY\";\n})(DAYS_OF_WEEK || (DAYS_OF_WEEK = {}));\nvar DEFAULT_WEEKEND_DAYS = [\n    DAYS_OF_WEEK.SUNDAY,\n    DAYS_OF_WEEK.SATURDAY\n];\nvar DAYS_IN_WEEK = 7;\nvar HOURS_IN_DAY = 24;\nvar MINUTES_IN_HOUR = 60;\nexport var SECONDS_IN_DAY = 60 * 60 * 24;\nexport var SECONDS_IN_WEEK = SECONDS_IN_DAY * DAYS_IN_WEEK;\nfunction getExcludedSeconds(_a) {\n    var startDate = _a.startDate, seconds = _a.seconds, excluded = _a.excluded, _b = _a.precision, precision = _b === void 0 ? 'days' : _b;\n    if (excluded.length < 1) {\n        return 0;\n    }\n    var endDate = addSeconds(startDate, seconds - 1);\n    var dayStart = getDay(startDate);\n    var dayEnd = getDay(addSeconds(endDate, 0));\n    var result = 0; // Calculated in seconds\n    var current = startDate;\n    var _loop_1 = function () {\n        var day = getDay(current);\n        if (excluded.some(function (excludedDay) { return excludedDay === day; })) {\n            result += calculateExcludedSeconds({\n                dayStart: dayStart,\n                dayEnd: dayEnd,\n                day: day,\n                precision: precision,\n                startDate: startDate,\n                endDate: endDate\n            });\n        }\n        current = addDays(current, 1);\n    };\n    while (current < endDate) {\n        _loop_1();\n    }\n    return result;\n}\nfunction calculateExcludedSeconds(_a) {\n    var precision = _a.precision, day = _a.day, dayStart = _a.dayStart, dayEnd = _a.dayEnd, startDate = _a.startDate, endDate = _a.endDate;\n    if (precision === 'minutes') {\n        if (day === dayStart) {\n            return differenceInSeconds(endOfDay(startDate), startDate) + 1;\n        }\n        else if (day === dayEnd) {\n            return differenceInSeconds(endDate, startOfDay(endDate)) + 1;\n        }\n    }\n    return SECONDS_IN_DAY;\n}\nfunction getWeekViewEventSpan(_a) {\n    var event = _a.event, offset = _a.offset, startOfWeekDate = _a.startOfWeekDate, excluded = _a.excluded, _b = _a.precision, precision = _b === void 0 ? 'days' : _b;\n    var span = SECONDS_IN_DAY;\n    var begin = max(event.start, startOfWeekDate);\n    if (event.end) {\n        switch (precision) {\n            case 'minutes':\n                span = differenceInSeconds(event.end, begin);\n                break;\n            default:\n                span =\n                    differenceInDays(addDays(endOfDay(event.end), 1), begin) *\n                        SECONDS_IN_DAY;\n                break;\n        }\n    }\n    var offsetSeconds = offset * SECONDS_IN_DAY;\n    var totalLength = offsetSeconds + span;\n    // the best way to detect if an event is outside the week-view\n    // is to check if the total span beginning (from startOfWeekDay or event start) exceeds 7days\n    if (totalLength > SECONDS_IN_WEEK) {\n        span = SECONDS_IN_WEEK - offsetSeconds;\n    }\n    span -= getExcludedSeconds({\n        startDate: begin,\n        seconds: span,\n        excluded: excluded,\n        precision: precision\n    });\n    return span / SECONDS_IN_DAY;\n}\nexport function getWeekViewEventOffset(_a) {\n    var event = _a.event, startOfWeekDate = _a.startOfWeek, _b = _a.excluded, excluded = _b === void 0 ? [] : _b, _c = _a.precision, precision = _c === void 0 ? 'days' : _c;\n    if (event.start < startOfWeekDate) {\n        return 0;\n    }\n    var offset = 0;\n    switch (precision) {\n        case 'days':\n            offset =\n                differenceInDays(startOfDay(event.start), startOfWeekDate) *\n                    SECONDS_IN_DAY;\n            break;\n        case 'minutes':\n            offset = differenceInSeconds(event.start, startOfWeekDate);\n            break;\n    }\n    offset -= getExcludedSeconds({\n        startDate: startOfWeekDate,\n        seconds: offset,\n        excluded: excluded,\n        precision: precision\n    });\n    return offset / SECONDS_IN_DAY;\n}\nfunction isEventIsPeriod(_a) {\n    var event = _a.event, periodStart = _a.periodStart, periodEnd = _a.periodEnd;\n    var eventStart = event.start;\n    var eventEnd = event.end || event.start;\n    if (eventStart > periodStart && eventStart < periodEnd) {\n        return true;\n    }\n    if (eventEnd > periodStart && eventEnd < periodEnd) {\n        return true;\n    }\n    if (eventStart < periodStart && eventEnd > periodEnd) {\n        return true;\n    }\n    if (isSameSecond(eventStart, periodStart) ||\n        isSameSecond(eventStart, periodEnd)) {\n        return true;\n    }\n    if (isSameSecond(eventEnd, periodStart) ||\n        isSameSecond(eventEnd, periodEnd)) {\n        return true;\n    }\n    return false;\n}\nexport function getEventsInPeriod(_a) {\n    var events = _a.events, periodStart = _a.periodStart, periodEnd = _a.periodEnd;\n    return events.filter(function (event) {\n        return isEventIsPeriod({ event: event, periodStart: periodStart, periodEnd: periodEnd });\n    });\n}\nfunction getWeekDay(_a) {\n    var date = _a.date, _b = _a.weekendDays, weekendDays = _b === void 0 ? DEFAULT_WEEKEND_DAYS : _b;\n    var today = startOfDay(new Date());\n    return {\n        date: date,\n        isPast: date < today,\n        isToday: isSameDay(date, today),\n        isFuture: date > today,\n        isWeekend: weekendDays.indexOf(getDay(date)) > -1\n    };\n}\nexport function getWeekViewHeader(_a) {\n    var viewDate = _a.viewDate, weekStartsOn = _a.weekStartsOn, _b = _a.excluded, excluded = _b === void 0 ? [] : _b, weekendDays = _a.weekendDays;\n    var start = startOfWeek(viewDate, { weekStartsOn: weekStartsOn });\n    var days = [];\n    var _loop_2 = function (i) {\n        var date = addDays(start, i);\n        if (!excluded.some(function (e) { return date.getDay() === e; })) {\n            days.push(getWeekDay({ date: date, weekendDays: weekendDays }));\n        }\n    };\n    for (var i = 0; i < DAYS_IN_WEEK; i++) {\n        _loop_2(i);\n    }\n    return days;\n}\nexport function getWeekView(_a) {\n    var _b = _a.events, events = _b === void 0 ? [] : _b, viewDate = _a.viewDate, weekStartsOn = _a.weekStartsOn, _c = _a.excluded, excluded = _c === void 0 ? [] : _c, _d = _a.precision, precision = _d === void 0 ? 'days' : _d, _e = _a.absolutePositionedEvents, absolutePositionedEvents = _e === void 0 ? false : _e;\n    if (!events) {\n        events = [];\n    }\n    var startOfViewWeek = startOfWeek(viewDate, { weekStartsOn: weekStartsOn });\n    var endOfViewWeek = endOfWeek(viewDate, { weekStartsOn: weekStartsOn });\n    var maxRange = DAYS_IN_WEEK - excluded.length;\n    var eventsInPeriod = getEventsInPeriod({\n        events: events,\n        periodStart: startOfViewWeek,\n        periodEnd: endOfViewWeek\n    });\n    var eventsMapped = eventsInPeriod\n        .map(function (event) {\n        var offset = getWeekViewEventOffset({\n            event: event,\n            startOfWeek: startOfViewWeek,\n            excluded: excluded,\n            precision: precision\n        });\n        var span = getWeekViewEventSpan({\n            event: event,\n            offset: offset,\n            startOfWeekDate: startOfViewWeek,\n            excluded: excluded,\n            precision: precision\n        });\n        return { event: event, offset: offset, span: span };\n    })\n        .filter(function (e) { return e.offset < maxRange; })\n        .filter(function (e) { return e.span > 0; })\n        .map(function (entry) { return ({\n        event: entry.event,\n        offset: entry.offset,\n        span: entry.span,\n        startsBeforeWeek: entry.event.start < startOfViewWeek,\n        endsAfterWeek: (entry.event.end || entry.event.start) > endOfViewWeek\n    }); })\n        .sort(function (itemA, itemB) {\n        var startSecondsDiff = differenceInSeconds(itemA.event.start, itemB.event.start);\n        if (startSecondsDiff === 0) {\n            return differenceInSeconds(itemB.event.end || itemB.event.start, itemA.event.end || itemA.event.start);\n        }\n        return startSecondsDiff;\n    });\n    var eventRows = [];\n    var allocatedEvents = [];\n    eventsMapped.forEach(function (event, index) {\n        if (allocatedEvents.indexOf(event) === -1) {\n            allocatedEvents.push(event);\n            var rowSpan_1 = event.span + event.offset;\n            var otherRowEvents = eventsMapped\n                .slice(index + 1)\n                .filter(function (nextEvent) {\n                if (nextEvent.offset >= rowSpan_1 &&\n                    rowSpan_1 + nextEvent.span <= DAYS_IN_WEEK &&\n                    allocatedEvents.indexOf(nextEvent) === -1) {\n                    var nextEventOffset = nextEvent.offset - rowSpan_1;\n                    if (!absolutePositionedEvents) {\n                        nextEvent.offset = nextEventOffset;\n                    }\n                    rowSpan_1 += nextEvent.span + nextEventOffset;\n                    allocatedEvents.push(nextEvent);\n                    return true;\n                }\n            });\n            eventRows.push({\n                row: [event].concat(otherRowEvents)\n            });\n        }\n    });\n    return {\n        eventRows: eventRows,\n        period: {\n            events: eventsInPeriod,\n            start: startOfViewWeek,\n            end: endOfViewWeek\n        }\n    };\n}\nexport function getMonthView(_a) {\n    var _b = _a.events, events = _b === void 0 ? [] : _b, viewDate = _a.viewDate, weekStartsOn = _a.weekStartsOn, _c = _a.excluded, excluded = _c === void 0 ? [] : _c, _d = _a.viewStart, viewStart = _d === void 0 ? startOfMonth(viewDate) : _d, _e = _a.viewEnd, viewEnd = _e === void 0 ? endOfMonth(viewDate) : _e, weekendDays = _a.weekendDays;\n    if (!events) {\n        events = [];\n    }\n    var start = startOfWeek(viewStart, { weekStartsOn: weekStartsOn });\n    var end = endOfWeek(viewEnd, { weekStartsOn: weekStartsOn });\n    var eventsInMonth = getEventsInPeriod({\n        events: events,\n        periodStart: start,\n        periodEnd: end\n    });\n    var initialViewDays = [];\n    var previousDate;\n    var _loop_3 = function (i) {\n        // hacky fix for https://github.com/mattlewis92/angular-calendar/issues/173\n        var date;\n        if (previousDate) {\n            date = startOfDay(addHours(previousDate, HOURS_IN_DAY));\n            if (previousDate.getTime() === date.getTime()) {\n                // DST change, so need to add 25 hours\n                date = startOfDay(addHours(previousDate, HOURS_IN_DAY + 1));\n            }\n            previousDate = date;\n        }\n        else {\n            date = previousDate = start;\n        }\n        if (!excluded.some(function (e) { return date.getDay() === e; })) {\n            var day = getWeekDay({\n                date: date,\n                weekendDays: weekendDays\n            });\n            var eventsInPeriod = getEventsInPeriod({\n                events: eventsInMonth,\n                periodStart: startOfDay(date),\n                periodEnd: endOfDay(date)\n            });\n            day.inMonth = isSameMonth(date, viewDate);\n            day.events = eventsInPeriod;\n            day.badgeTotal = eventsInPeriod.length;\n            initialViewDays.push(day);\n        }\n    };\n    for (var i = 0; i < differenceInDays(end, start) + 1; i++) {\n        _loop_3(i);\n    }\n    var days = [];\n    var totalDaysVisibleInWeek = DAYS_IN_WEEK - excluded.length;\n    if (totalDaysVisibleInWeek < DAYS_IN_WEEK) {\n        for (var i = 0; i < initialViewDays.length; i += totalDaysVisibleInWeek) {\n            var row = initialViewDays.slice(i, i + totalDaysVisibleInWeek);\n            var isRowInMonth = row.some(function (day) { return day.date.getMonth() === viewDate.getMonth(); });\n            if (isRowInMonth) {\n                days = days.concat(row);\n            }\n        }\n    }\n    else {\n        days = initialViewDays;\n    }\n    var rows = Math.floor(days.length / totalDaysVisibleInWeek);\n    var rowOffsets = [];\n    for (var i = 0; i < rows; i++) {\n        rowOffsets.push(i * totalDaysVisibleInWeek);\n    }\n    return {\n        rowOffsets: rowOffsets,\n        totalDaysVisibleInWeek: totalDaysVisibleInWeek,\n        days: days,\n        period: {\n            start: start,\n            end: end,\n            events: eventsInMonth\n        }\n    };\n}\nexport function getDayView(_a) {\n    var _b = _a.events, events = _b === void 0 ? [] : _b, viewDate = _a.viewDate, hourSegments = _a.hourSegments, dayStart = _a.dayStart, dayEnd = _a.dayEnd, eventWidth = _a.eventWidth, segmentHeight = _a.segmentHeight;\n    if (!events) {\n        events = [];\n    }\n    var startOfView = setMinutes(setHours(startOfDay(viewDate), dayStart.hour), dayStart.minute);\n    var endOfView = setMinutes(setHours(startOfMinute(endOfDay(viewDate)), dayEnd.hour), dayEnd.minute);\n    var previousDayEvents = [];\n    var eventsInPeriod = getEventsInPeriod({\n        events: events.filter(function (event) { return !event.allDay; }),\n        periodStart: startOfView,\n        periodEnd: endOfView\n    });\n    var dayViewEvents = eventsInPeriod\n        .sort(function (eventA, eventB) {\n        return eventA.start.valueOf() - eventB.start.valueOf();\n    })\n        .map(function (event) {\n        var eventStart = event.start;\n        var eventEnd = event.end || eventStart;\n        var startsBeforeDay = eventStart < startOfView;\n        var endsAfterDay = eventEnd > endOfView;\n        var hourHeightModifier = hourSegments * segmentHeight / MINUTES_IN_HOUR;\n        var top = 0;\n        if (eventStart > startOfView) {\n            top += differenceInMinutes(eventStart, startOfView);\n        }\n        top *= hourHeightModifier;\n        var startDate = startsBeforeDay ? startOfView : eventStart;\n        var endDate = endsAfterDay ? endOfView : eventEnd;\n        var height = differenceInMinutes(endDate, startDate);\n        if (!event.end) {\n            height = segmentHeight;\n        }\n        else {\n            height *= hourHeightModifier;\n        }\n        var bottom = top + height;\n        var overlappingPreviousEvents = previousDayEvents.filter(function (previousEvent) {\n            var previousEventTop = previousEvent.top;\n            var previousEventBottom = previousEvent.top + previousEvent.height;\n            if (top < previousEventBottom && previousEventBottom < bottom) {\n                return true;\n            }\n            else if (previousEventTop <= top && bottom <= previousEventBottom) {\n                return true;\n            }\n            return false;\n        });\n        var left = 0;\n        while (overlappingPreviousEvents.some(function (previousEvent) { return previousEvent.left === left; })) {\n            left += eventWidth;\n        }\n        var dayEvent = {\n            event: event,\n            height: height,\n            width: eventWidth,\n            top: top,\n            left: left,\n            startsBeforeDay: startsBeforeDay,\n            endsAfterDay: endsAfterDay\n        };\n        if (height > 0) {\n            previousDayEvents.push(dayEvent);\n        }\n        return dayEvent;\n    })\n        .filter(function (dayEvent) { return dayEvent.height > 0; });\n    var width = Math.max.apply(Math, dayViewEvents.map(function (event) { return event.left + event.width; }));\n    var allDayEvents = getEventsInPeriod({\n        events: events.filter(function (event) { return event.allDay; }),\n        periodStart: startOfDay(startOfView),\n        periodEnd: endOfDay(endOfView)\n    });\n    return {\n        events: dayViewEvents,\n        width: width,\n        allDayEvents: allDayEvents,\n        period: {\n            events: eventsInPeriod,\n            start: startOfView,\n            end: endOfView\n        }\n    };\n}\nexport function getDayViewHourGrid(_a) {\n    var viewDate = _a.viewDate, hourSegments = _a.hourSegments, dayStart = _a.dayStart, dayEnd = _a.dayEnd;\n    var hours = [];\n    var startOfView = setMinutes(setHours(startOfDay(viewDate), dayStart.hour), dayStart.minute);\n    var endOfView = setMinutes(setHours(startOfMinute(endOfDay(viewDate)), dayEnd.hour), dayEnd.minute);\n    var segmentDuration = MINUTES_IN_HOUR / hourSegments;\n    var startOfViewDay = startOfDay(viewDate);\n    for (var i = 0; i < HOURS_IN_DAY; i++) {\n        var segments = [];\n        for (var j = 0; j < hourSegments; j++) {\n            var date = addMinutes(addHours(startOfViewDay, i), j * segmentDuration);\n            if (date >= startOfView && date < endOfView) {\n                segments.push({\n                    date: date,\n                    isStart: j === 0\n                });\n            }\n        }\n        if (segments.length > 0) {\n            hours.push({ segments: segments });\n        }\n    }\n    return hours;\n}\nexport var EventValidationErrorMessage;\n(function (EventValidationErrorMessage) {\n    EventValidationErrorMessage[\"NotArray\"] = \"Events must be an array\";\n    EventValidationErrorMessage[\"StartPropertyMissing\"] = \"Event is missing the `start` property\";\n    EventValidationErrorMessage[\"StartPropertyNotDate\"] = \"Event `start` property should be a javascript date object. Do `new Date(event.start)` to fix it.\";\n    EventValidationErrorMessage[\"EndPropertyNotDate\"] = \"Event `end` property should be a javascript date object. Do `new Date(event.end)` to fix it.\";\n    EventValidationErrorMessage[\"EndsBeforeStart\"] = \"Event `start` property occurs after the `end`\";\n})(EventValidationErrorMessage || (EventValidationErrorMessage = {}));\nexport function validateEvents(events, log) {\n    var isValid = true;\n    function isError(msg, event) {\n        log(msg, event);\n        isValid = false;\n    }\n    if (!Array.isArray(events)) {\n        log(EventValidationErrorMessage.NotArray, events);\n        return false;\n    }\n    events.forEach(function (event) {\n        if (!event.start) {\n            isError(EventValidationErrorMessage.StartPropertyMissing, event);\n        }\n        else if (!isDate(event.start)) {\n            isError(EventValidationErrorMessage.StartPropertyNotDate, event);\n        }\n        if (event.end) {\n            if (!isDate(event.end)) {\n                isError(EventValidationErrorMessage.EndPropertyNotDate, event);\n            }\n            if (event.start > event.end) {\n                isError(EventValidationErrorMessage.EndsBeforeStart, event);\n            }\n        }\n    });\n    return isValid;\n}\n//# sourceMappingURL=calendar-utils.js.map"]}]}